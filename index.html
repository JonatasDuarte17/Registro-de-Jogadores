<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Registro de Jogadores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Dark mode detection -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
        <!-- Notification system -->
    <div id="notification" class="fixed top-4 right-4 max-w-xs bg-white dark:bg-gray-800 border-l-4 border-primary shadow-md rounded-md p-4 transform transition-transform duration-300 translate-x-full z-50">
        <div class="flex items-start">
            <div class="ml-3 w-0 flex-1">
                <p id="notification-message" class="text-sm font-medium text-gray-900 dark:text-gray-100"></p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
                <button id="close-notification" class="inline-flex text-gray-400 hover:text-gray-500 focus:outline-none">
                    <span class="sr-only">Fechar</span>
                    <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-6 max-w-3xl">
        <h1 class="text-3xl font-bold text-center text-primary mb-6">Sistema de Registro de Jogadores</h1>
        
        <!-- Tabs -->
        <div class="mb-6">
            <div class="flex border-b border-gray-300 dark:border-gray-700">
                <button id="tab-id-input" class="tab-btn px-4 py-2 border-b-2 border-primary font-medium text-primary">Entrada de ID</button>
                <button id="tab-register" class="tab-btn px-4 py-2 border-b-2 border-transparent font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary">Cadastro</button>
                <button id="tab-search" class="tab-btn px-4 py-2 border-b-2 border-transparent font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary">Pesquisa</button>
            </div>
        </div>
                <!-- Content containers -->
        <div id="id-input-container" class="tab-content">
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-4">
                <h2 class="text-xl font-semibold mb-2">Verificar Jogador por ID</h2>
                <p class="mb-4">Digite o ID do jogador para verificar seu status.</p>
                
                <div class="flex flex-col items-center">
                    <div class="w-full max-w-md mb-4">
                        <div class="flex space-x-2">
                            <input type="text" id="playerIdInput" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" placeholder="Digite o ID do jogador">
                            <button id="checkPlayerButton" class="bg-primary hover:bg-opacity-90 text-white px-3 py-2 rounded whitespace-nowrap">
                                Verificar
                            </button>
                        </div>
                    </div>
                    
                    <div class="w-full max-w-md">
                        <div class="bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 mb-4">
                            <h3 class="font-medium text-lg mb-2">IDs de exemplo</h3>
                            <p class="text-sm mb-1">Para teste, você pode usar os seguintes IDs:</p>
                            <ul class="list-disc list-inside text-sm">
                                <li>123456 - João Silva (Liberado)</li>
                                <li>789012 - Maria Oliveira (Bloqueado)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="player-info-display" class="mt-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow hidden">
                <h3 class="text-lg font-semibold border-b pb-2 mb-2 border-gray-200 dark:border-gray-700">Informações do Jogador</h3>
                <div id="player-info" class="space-y-2">
                    <!-- Player information will be displayed here -->
                </div>
            </div>
        </div>
                <div id="register-container" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                <h2 class="text-xl font-semibold mb-4">Cadastro de Jogador</h2>
                <form id="register-form" class="space-y-4">
                    <div>
                        <label for="playerId" class="block text-sm font-medium mb-1">ID do Jogador</label>
                        <input type="text" id="playerId" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" placeholder="Digite o ID do jogador" required>
                    </div>
                    
                    <div>
                        <label for="playerName" class="block text-sm font-medium mb-1">Nome do Jogador</label>
                        <input type="text" id="playerName" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" required>
                    </div>
                    
                    <div>
                        <label for="playerAge" class="block text-sm font-medium mb-1">Idade</label>
                        <input type="number" id="playerAge" min="1" max="120" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" required>
                    </div>
                    
                    <div>
                        <label for="playerTeam" class="block text-sm font-medium mb-1">Time</label>
                        <input type="text" id="playerTeam" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" required>
                    </div>
                    
                    <div>
                        <label for="playerStatus" class="block text-sm font-medium mb-1">Status</label>
                        <select id="playerStatus" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" required>
                            <option value="liberado">Liberado para jogar</option>
                            <option value="bloqueado">Não liberado para jogar</option>
                        </select>
                    </div>
                    
                    <div class="pt-2">
                        <button type="submit" class="w-full bg-primary hover:bg-opacity-90 text-white font-bold py-2 px-4 rounded">
                            Cadastrar Jogador
                        </button>
                    </div>
                </form>
            </div>
                </div>
                        <div id="search-container" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                <h2 class="text-xl font-semibold mb-4">Pesquisar Jogador</h2>
                <div class="mb-4">
                    <label for="searchTerm" class="block text-sm font-medium mb-1">Buscar por nome</label>
                    <div class="flex space-x-2">
                        <input type="text" id="searchTerm" class="w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-700 text-base px-3 py-2" placeholder="Digite o nome do jogador">
                        <button id="searchButton" class="bg-primary hover:bg-opacity-90 text-white px-3 py-2 rounded">
                            Buscar
                        </button>
                    </div>
                </div>
                
                <div id="search-results" class="mt-4">
                    <h3 class="text-lg font-semibold mb-2 hidden" id="results-heading">Resultados da Busca</h3>
                    <div id="players-list" class="space-y-2">
                        <!-- Search results will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
        <script>
        // In-memory database with local storage persistence
        let playersDB = [];
        
        // DOM elements
        const playerInfoDisplay = document.getElementById('player-info-display');
        const playerInfo = document.getElementById('player-info');
        const registerForm = document.getElementById('register-form');
        const searchButton = document.getElementById('searchButton');
        const searchTerm = document.getElementById('searchTerm');
        const playersListDiv = document.getElementById('players-list');
        const resultsHeading = document.getElementById('results-heading');
        const playerIdInput = document.getElementById('playerIdInput');
        const checkPlayerButton = document.getElementById('checkPlayerButton');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notification-message');
        const closeNotification = document.getElementById('close-notification');
        
        // Tab elements
        const tabIdInput = document.getElementById('tab-id-input');
        const tabRegister = document.getElementById('tab-register');
        const tabSearch = document.getElementById('tab-search');
        const idInputContainer = document.getElementById('id-input-container');
        const registerContainer = document.getElementById('register-container');
        const searchContainer = document.getElementById('search-container');
        
        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('playersDB', JSON.stringify(playersDB));
                console.log('Dados salvos com sucesso');
            } catch (e) {
                console.error('Erro ao salvar dados:', e);
            }
        }
        
        // Initialize database from localStorage if available
        function initializeDB() {
            try {
                // Try to load data from local storage
                const savedData = localStorage.getItem('playersDB');
                if (savedData) {
                    playersDB = JSON.parse(savedData);
                    console.log('Dados carregados do armazenamento local:', playersDB.length, 'jogadores');
                } else {
                    // Create initial data if no saved data exists
                    console.log('Inicializando banco de dados de jogadores');
                    playersDB = [
                        { id: '123456', name: 'João Silva', age: 25, team: 'Leões FC', status: 'liberado' },
                        { id: '789012', name: 'Maria Oliveira', age: 22, team: 'Tigres FC', status: 'bloqueado' }
                    ];
                    // Save initial data
                    saveData();
                }
            } catch (e) {
                console.error('Erro ao carregar dados:', e);
                // Fallback to initial data in case of error
                playersDB = [
                    { id: '123456', name: 'João Silva', age: 25, team: 'Leões FC', status: 'liberado' },
                    { id: '789012', name: 'Maria Oliveira', age: 22, team: 'Tigres FC', status: 'bloqueado' }
                ];
            }
        }
        
        // Show notification
        function showNotification(message, duration = 3000) {
            notificationMessage.textContent = message;
            notification.classList.remove('translate-x-full');
            
            // Auto-hide after duration
            setTimeout(() => {
                hideNotification();
            }, duration);
        }
        
        // Hide notification
        function hideNotification() {
            notification.classList.add('translate-x-full');
        }
        
        // Handle tab switching
        function switchTab(tabId) {
            // Hide all tab content
            idInputContainer.classList.add('hidden');
            registerContainer.classList.add('hidden');
            searchContainer.classList.add('hidden');
            
            // Reset tab button styles
            tabIdInput.classList.remove('border-primary', 'text-primary');
            tabIdInput.classList.add('border-transparent', 'text-gray-500');
            tabRegister.classList.remove('border-primary', 'text-primary');
            tabRegister.classList.add('border-transparent', 'text-gray-500');
            tabSearch.classList.remove('border-primary', 'text-primary');
            tabSearch.classList.add('border-transparent', 'text-gray-500');
            
            // Show selected tab and highlight its button
            if (tabId === 'id-input') {
                idInputContainer.classList.remove('hidden');
                tabIdInput.classList.remove('border-transparent', 'text-gray-500');
                tabIdInput.classList.add('border-primary', 'text-primary');
            } else if (tabId === 'register') {
                registerContainer.classList.remove('hidden');
                tabRegister.classList.remove('border-transparent', 'text-gray-500');
                tabRegister.classList.add('border-primary', 'text-primary');
            } else if (tabId === 'search') {
                searchContainer.classList.remove('hidden');
                tabSearch.classList.remove('border-transparent', 'text-gray-500');
                tabSearch.classList.add('border-primary', 'text-primary');
            }
        }
                  // Check player by ID
        function checkPlayer() {
            const id = playerIdInput.value.trim();
            
            if (!id) {
                showNotification('Por favor, digite o ID do jogador.');
                return;
            }
            
            // Look up player by ID
            const player = playersDB.find(p => p.id === id);
            
            if (player) {
                displayPlayerInfo(player);
            } else {
                // New player - suggest registration
                playerInfo.innerHTML = `
                    <div class="text-center py-4">
                        <p class="mb-3">Jogador não encontrado. Deseja cadastrar?</p>
                        <button id="register-new-player" class="bg-primary hover:bg-opacity-90 text-white font-bold py-2 px-4 rounded">
                            Cadastrar Novo Jogador
                        </button>
                    </div>
                `;
                
                document.getElementById('register-new-player').addEventListener('click', () => {
                    document.getElementById('playerId').value = id;
                    switchTab('register');
                });
                
                playerInfoDisplay.classList.remove('hidden');
            }
        }
        
        // Display player information after checking
        function displayPlayerInfo(player) {
            const statusClass = player.status === 'liberado' 
                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' 
                : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
            
            const statusText = player.status === 'liberado' ? 'Liberado para jogar' : 'Não liberado para jogar';
            
            playerInfo.innerHTML = `
                <div class="grid grid-cols-3 gap-1">
                    <div class="font-medium">Nome:</div>
                    <div class="col-span-2">${player.name}</div>
                    
                    <div class="font-medium">Idade:</div>
                    <div class="col-span-2">${player.age} anos</div>
                    
                    <div class="font-medium">Time:</div>
                    <div class="col-span-2">${player.team}</div>
                    
                    <div class="font-medium">Status:</div>
                    <div class="col-span-2">
                        <span class="px-2 py-1 rounded-full text-sm ${statusClass}">${statusText}</span>
                    </div>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="edit-displayed-player" class="bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded text-sm">
                        Editar Jogador
                    </button>
                </div>
            `;
            
            // Add event listener for edit button
            setTimeout(() => {
                const editButton = document.getElementById('edit-displayed-player');
                if (editButton) {
                    editButton.addEventListener('click', () => {
                        editPlayer(player.id);
                    });
                }
            }, 0);
            
            playerInfoDisplay.classList.remove('hidden');
        }
        
        // Register a new player
        function registerPlayer(event) {
            event.preventDefault();
            
            const id = document.getElementById('playerId').value.trim();
            const name = document.getElementById('playerName').value.trim();
            const age = parseInt(document.getElementById('playerAge').value);
            const team = document.getElementById('playerTeam').value.trim();
            const status = document.getElementById('playerStatus').value;
            
            if (!id) {
                showNotification('Por favor, digite um ID para o jogador.');
                return;
            }
            
            // Check if player already exists
            const existingPlayerIndex = playersDB.findIndex(p => p.id === id);
            
            if (existingPlayerIndex !== -1) {
                // Update existing player
                playersDB[existingPlayerIndex] = { id, name, age, team, status };
                showNotification(`Jogador "${name}" atualizado com sucesso!`);
            } else {
                // Add new player
                playersDB.push({ id, name, age, team, status });
                showNotification(`Jogador "${name}" cadastrado com sucesso!`);
            }
            
            // Save to local storage
            saveData();
            
            // Reset form
            registerForm.reset();
        }
                  // Search players by name
        function searchPlayers() {
            const term = searchTerm.value.toLowerCase().trim();
            
            if (!term) {
                playersListDiv.innerHTML = '<p class="text-gray-500 italic">Digite um nome para buscar.</p>';
                resultsHeading.classList.add('hidden');
                return;
            }
            
            const results = playersDB.filter(player => 
                player.name.toLowerCase().includes(term)
            );
            
            if (results.length === 0) {
                playersListDiv.innerHTML = '<p class="text-gray-500 italic">Nenhum jogador encontrado.</p>';
            } else {
                let html = '';
                
                results.forEach(player => {
                    const statusClass = player.status === 'liberado' 
                        ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' 
                        : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
                    
                    const statusText = player.status === 'liberado' ? 'Liberado para jogar' : 'Não liberado para jogar';
                    
                    html += `
                        <div class="bg-white dark:bg-gray-700 p-3 rounded shadow">
                            <div class="grid grid-cols-3 gap-1">
                                <div class="font-medium">Nome:</div>
                                <div class="col-span-2">${player.name}</div>
                                
                                <div class="font-medium">Idade:</div>
                                <div class="col-span-2">${player.age} anos</div>
                                
                                <div class="font-medium">Time:</div>
                                <div class="col-span-2">${player.team}</div>
                                
                                <div class="font-medium">Status:</div>
                                <div class="col-span-2">
                                    <span class="px-2 py-1 rounded-full text-sm ${statusClass}">${statusText}</span>
                                </div>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="edit-player bg-blue-500 hover:bg-blue-600 text-white py-1 px-2 rounded text-sm" 
                                    data-id="${player.id}">
                                    Editar
                                </button>
                                <button class="toggle-status 
                                    ${player.status === 'liberado' ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'} 
                                    text-white py-1 px-2 rounded text-sm" 
                                    data-id="${player.id}">
                                    ${player.status === 'liberado' ? 'Bloquear' : 'Liberar'}
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                playersListDiv.innerHTML = html;
                
                // Add event listeners to edit buttons
                document.querySelectorAll('.edit-player').forEach(button => {
                    button.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        editPlayer(id);
                    });
                });
                
                // Add event listeners to toggle status buttons
                document.querySelectorAll('.toggle-status').forEach(button => {
                    button.addEventListener('click', function() {
                        const id = this.getAttribute('data-id');
                        togglePlayerStatus(id);
                    });
                });
            }
            
            resultsHeading.classList.remove('hidden');
        }
        
        // Edit player
        function editPlayer(id) {
            const player = playersDB.find(p => p.id === id);
            
            if (player) {
                // Fill form with player data
                document.getElementById('playerId').value = player.id;
                document.getElementById('playerName').value = player.name;
                document.getElementById('playerAge').value = player.age;
                document.getElementById('playerTeam').value = player.team;
                document.getElementById('playerStatus').value = player.status;
                
                // Switch to register tab
                switchTab('register');
            }
        }
        
        // Toggle player status (liberado/bloqueado)
        function togglePlayerStatus(id) {
            const playerIndex = playersDB.findIndex(p => p.id === id);
            
            if (playerIndex !== -1) {
                // Toggle status
                const newStatus = playersDB[playerIndex].status === 'liberado' ? 'bloqueado' : 'liberado';
                playersDB[playerIndex].status = newStatus;
                
                // Save to local storage
                saveData();
                
                // Show notification
                const statusText = newStatus === 'liberado' ? 'liberado' : 'bloqueado';
                showNotification(`Status do jogador alterado para: ${statusText}`);
                
                // Refresh search results
                searchPlayers();
            }
        }
        
        // Initialize app
        function init() {
            initializeDB();
            
            // Tab switching
            tabIdInput.addEventListener('click', () => switchTab('id-input'));
            tabRegister.addEventListener('click', () => switchTab('register'));
            tabSearch.addEventListener('click', () => switchTab('search'));
            
            // Check player
            checkPlayerButton.addEventListener('click', checkPlayer);
            playerIdInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    checkPlayer();
                }
            });
            
            // Registration
            registerForm.addEventListener('submit', registerPlayer);
            
            // Search
            searchButton.addEventListener('click', searchPlayers);
            searchTerm.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    searchPlayers();
                }
            });
            
            // Close notification
            closeNotification.addEventListener('click', hideNotification);
        }
        
        // Initialize when the document is fully loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
